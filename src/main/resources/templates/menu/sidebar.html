<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sidebar</title>
    <link rel="stylesheet" th:href="@{/menu/sidebar.css}">
    <!-- Font Awesome 아이콘 추가 -->
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-pap6xf4h3yKk5MZbPcvwE0Jp0ybFNRHsbVqBZ5lEToZ3z3gWnDcn58C0wFgZxqLeSyDW7eo5C1yAIlqGZC6Ehw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
<!-- 컨테이너 시작 -->
<div class="container">
    <!-- 사이드바 시작 -->
    <div th:fragment="sidebar" class="sidebar">
        <!-- 텍스트 로고 섹션 -->
        <div class="logo-text">
            <a href="/projects/dashboard" class="logo-link">
                <h1 id="logo" th:if="${user != null}" th:text="${user.username}"></h1>
                <h1 id="logo" th:if="${user == null}">로그인하지 않음</h1> <!-- 로그인하지 않았을 때의 대체 텍스트 -->
            </a>

        </div>

        <!-- 프로필 이미지 섹션 -->
        <div class="profile-section">
            <img th:src="${user != null and user.profilePicUrl != null ? user.profilePicUrl : '/images/default-profile.png'}"
                 alt="프로필 사진" class="profile-pic"/>
        </div>

        <!-- 네비게이션 그룹 (프로필 관리, 권한 설정, 프로젝트 관리, 새 프로젝트) -->
        <div class="nav-group">
            <!-- 네비게이션 그룹 (프로필 관리, 권한 설정, 프로젝트 관리, 새 프로젝트) -->
            <div class="nav-group">
                <!-- 프로필 관리와 권한 설정 버튼을 가로로 배치하는 컨테이너 -->
                <div class="nav-buttons-row">
                    <a href="/access/profile" class="nav-button">
                        <i class="fas fa-user"></i> 프로필 관리
                    </a>
                    <!-- 권한 관리 버튼 -->
                    <div>
                        <a href="/access/assign-role" class="nav-button" th:classappend="${not role.contains('ADMIN')} ? 'disabled'" th:attr="aria-disabled=${not role.contains('ADMIN')}">
                            <i class="fas fa-user-shield"></i> 권한 관리
                        </a>
                    </div>

                </div>
                <!-- 나머지 네비게이션 버튼들 (프로젝트 관리, 새 프로젝트) -->
                <div class="nav-buttons">
                    <a href="/projects/list" class="nav-button">
                        <i class="fas fa-project-diagram"></i> 프로젝트 관리
                    </a>
                </div>
            </div>
        </div>

        <!-- 로그아웃 버튼 그룹 -->
        <div class="nav-group">
            <form th:action="@{/access/logout}" method="post">
                <button type="submit" class="logout-button">
                    <i class="fas fa-sign-out-alt"></i> 로그아웃
                </button>
            </form>
        </div>
    </div>
</div>
</body>
</html>
